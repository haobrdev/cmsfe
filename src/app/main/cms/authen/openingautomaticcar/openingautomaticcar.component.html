<div class="app-main-content">
    <div class="app-container">
      <div class="app-toolbar">
        <div class="card card-content">
          <div class="card-main-header">
            <img src="/assets/images/list-icon.png" />
            <span class="card-main-title">CẤU HÌNH TỰ ĐỘNG MỞ</span>
          </div>
          <div class="row full-width">
            <h5 class="title">ĐIỀU KIỆN TỰ ĐỘNG MỞ VỚI LOẠI BIỂN XE</h5>
            <div class="card card-content-design" style="min-height: 4rem;padding-left: 20px;padding-right: 20px;">
              <div class="main-toolbar">
                <div class="row">
                  <div class="col-sm-1" *ngFor='let licensetype of LicenseTypes' style="padding: 20px 10px 0px 0px !important;">
                    <div class="form-group">
                       <ejs-checkbox label="{{licensetype.name}}" [checked]="licensetype.checked"  
                          formControlName="licensetype.name" (change)="changeLicenseType(licensetype)">
                        </ejs-checkbox>
                    </div>
                 </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row full-width">
            <h5 class="title">ĐIỀU KIỆN TỰ ĐỘNG MỞ VỚI XE</h5>
            <div class="card card-content-design openingautomaticcar-car">
              <div class="main-toolbar">
                <div class="row">
                  <div class="col-sm-12 p-n" style="padding-right: 5px !important">
                    <div  class="row">
                      <div class="col-xl-3 col-lg-3  col-md-12  col-xs-12 col-sm-12">
                          <!-- Biển số xe  -->
                          <div class="form-group mgl-1">
                            <div class="e-float-input">
                            <input class="searchText" type="text" id="text" name="text" [placeholder]="'Nhập biển số xe'"
                                [(ngModel)]="search.license_no" [ngModelOptions]="{ standalone: true }"
                                (keypress)="searchListEnter($event)" />
                                <label class="e-float-text" for="text">Biển số xe</label>
                            </div>
                          </div>
                      </div>
                      <div class="col-xl-3 col-lg-3  col-md-12  col-xs-12 col-sm-12">
                        <!-- Họ tên chủ xe -->
                         <div class="form-group mgl-1">
                           <div class="e-float-input ">
                            <input class="searchText" type="text" id="text" name="text" [placeholder]="'Nhập họ tên chủ xe'"
                                [(ngModel)]="search.car_owner" [ngModelOptions]="{ standalone: true }"
                                (keypress)="searchListEnter($event)" />
                                <label class="e-float-text" for="text">Họ tên chủ xe</label>

                           
                           </div>
                       </div>    
                     </div>
                      <div class="col-xl-3 col-lg-3  col-md-12  col-xs-12 col-sm-12">
                          <!-- Loại biển -->
                          <div class="form-group mgl-1">
                            <div class="e-float-input ">
                            <ejs-dropdownlist id="license_type" [dataSource]="lstLicenseTypes" [fields]="fields" [popupWidth]="200"
                                [(ngModel)]="search.license_type" [placeholder]="" [ngModelOptions]="{ standalone: true }"
                                [allowFiltering]="true" (filtering)="onFiltering($event, lstLicenseTypes)" [showClearButton]="true"
                                placeholder="Loại biển" (change)="changeModel()"
                                (ngModelChange)="changeModel()">
                            </ejs-dropdownlist>
                            <label class="e-float-text" for="text">Loại biển</label>
                            </div>
                        </div>
                      </div>
                      <div class="col-xl-3 col-lg-3  col-md-3  col-xs-12 col-sm-12">
                        <div class="e-float-input bg" style="width: 110px;float: right;">
                          <button class="btn btn-search" (click)="getListData()">
                            Tìm kiếm
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-main-content">
            <div class="list-grid">
              <ejs-grid #overviewgrid id="overviewgrid" [dataSource]="data | async" rowHeight="45" headerHeight="52"
                [allowPaging]="true" [pageSettings]="configs.pageSettings" [enableHover]="true"
                [height]="configs.height()"  allowResizing="true" [locale]="configs.currentLang"
                [allowSelection]="true"  [selectionSettings]="configs.selectionSettings"
                 (dataStateChange)="dataStateChange($event)"
                 (checkBoxChange)="checkBoxChange($event)"
                [filterSettings]="configs.filterSettings" [editSettings]="configs.editSettings"
                (rowSelecting)="setButtonStatus($event)" (rowDeselecting)="setButtonStatus($event)" [allowTextWrap]="true"
                [textWrapSettings]="configs.wrapSettings">
                <e-columns>
                  <e-column field="id"  [visible]="false" headerText="ID" width="130"
                  [isPrimaryKey]="true" ></e-column>

                  <e-column headerTextAlign="Center" textAlign="Center" headerText="STT" 
                    width="45">
                    <ng-template #template let-data>
                      <span>{{ formatStt(data.index) }}</span>
                    </ng-template>
                  </e-column>

                  <e-column field="is_open_automatically"  type='checkbox'  textAlign="Left" headerTextAlign="Center"  width='30'  (checkBoxChange)="changeAll(data)">

                  </e-column>


                  <e-column field="license_no" textAlign="Left" headerTextAlign="Center" headerText="Biển số xe" width="110">
                  </e-column>
                  <e-column field="license_type_name" textAlign="Left" headerTextAlign="Center" headerText="Loại biển" width="110">
                  </e-column>
                 <e-column field="car_owner_name" textAlign="Left" headerTextAlign="Center" headerText="Họ tên chủ xe" width="180">
                </e-column>
                <e-column field="date_updated_tostring" textAlign="Left" headerTextAlign="Center" headerText="Thời gian cập nhật" width="180">
                </e-column>


                </e-columns>
              </ejs-grid>
            </div>
          </div>
        </div>
      </div>
  
    </div>
  </div>
